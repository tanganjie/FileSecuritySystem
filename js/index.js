/** * @author SunXinwei */$(document).ready(function(){    /**     * 记住我     */    var flag = false;    $("#remmemberCheck").click(function(){        if(!flag){            $(this).val(true);            flag = true;        }        else{            $(this).val(false);            flag = false;        }    });    /**     * 登录     */    $("#LoginButton").click(function(){        $("#loginerror").hide();        //username valid        var username=$("#username").val();        $("#username").val(username.trim());        if(username.trim()==""){            $(this).val("Username");            $("#usernameAlert").show();        }        else{            name=true;        }        //password valid        if($("#password").val() == ""){            $("#password").val("********");            $("#passwordAlert").show();        }        else{            pass=true;        }        //login        if(name && pass){            window.location = "system_index.html";            $("#LoginButton").disabled = true;            var paramData = $("#loginform").serialize();            //alert($("#remmemberCheck")            //$.post("http://localhost:8080/FSS/rest/userinfo/login", paramData, function(data){            //    if(data != undefined){            //        var remmemberme = $("#remmemberCheck").val();            //        $.cookie("remmemberme", remmemberme, {path: "/"});            //        if(remmemberme == "true"){            //            $.cookie("username", data.username, {path: "/"});            //            $.cookie("password", data.password, {path: "/"});            //        }            //        window.location = "system_index.html";            //    }            //    else{            //        $("#loginerror").show();            //        $("#LoginButton").disabled = false;            //    }            //}, "json");        }    });    /**     * 登录框验证     */    var name = false;    var pass = false;    $("#username").focus(function(){        if($(this).val() == "Username"){            $(this).val("");        }        $("#usernameAlert").hide();    }).blur(function(){        name = false;        var username=$(this).val();        $(this).val(username.trim());        if(username.trim()==""){            $(this).val("Username");            $("#usernameAlert").show();        }        else{            name=true;        }    });    $("#password").focus(function(){        if($(this).val() == "********"){            $(this).val("");        }        $("#passwordAlert").hide();    }).blur(function(){        pass = false;        if($(this).val() == ""){            $(this).val("********");            $("#passwordAlert").show();        }        else{            pass=true;        }    });    /**     * 注册     */    $("#RegisterButton").click(function(){        $("#registererror").hide();        //username valid        var value = $("#rusername").val().trim();        $("#rusername").val(value);        if(value == ""){            $("#rusername").next().next().html("<i class='fa fa-exclamation-circle'></i><span> Username can't be empty</span>");            $("#rusername").next().next().show();            $("#rusername").val("Username");        }        else if(value.length < 6 || value.length > 20){            $("#rusername").next().next().html("<i class='fa fa-exclamation-circle'></i><span> Invalid, 6-20 characters</span>");            $("#rusername").next().next().show();        }        else{            var paramData = "username=" + value;            //验证用户名是否存在            $.post("http://localhost:8080/FSS/rest/userinfo/registerValidUsername", paramData, function(data){                switch (data){                    case "success":                        rusername = true;                        break;                    case "invalid":                        $("#rusername").next().next().html("<i class='fa fa-exclamation-circle'></i><span> Invalid, this Username already exists</span>");                        $("#rusername").next().next().show();                        break;                    default :                        $("#rusername").next().next().html("<i class='fa fa-exclamation-circle'></i><span> Error!</span>");                        $("#rusername").next().next().show();                        break;                }            });        }        //password valid        var value = $("#rpassword").val();        if(value == ""){            $("#rpassword").next().next().html("<i class='fa fa-exclamation-circle'></i><span> Password can't be empty</span>");            $("#rpassword").next().next().show();            $("#rpassword").val("********");        }        else if(value.length < 6 || value.length > 20){            $("#rpassword").next().next().html("<i class='fa fa-exclamation-circle'></i><span> Invalid, 6-20 characters</span>");            $("#rpassword").next().next().show();        }        else{            rpassword = true;        }        //passwordconfirm valid        var value = $("#passwordconfirm").val();        if(value == ""){            $("#passwordconfirm").next().next().html("<i class='fa fa-exclamation-circle'></i><span> Password Confirm can't be empty</span>");            $("#passwordconfirm").next().next().show();            $("#passwordconfirm").val("********");        }        else if($("#passwordconfirm").val() != $("#rpassword").val()){            $("#passwordconfirm").next().next().html("<i class='fa fa-exclamation-circle'></i><span> Invalid, must be the same as Password</span>");            $("#passwordconfirm").next().next().show();        }        else{            rconpass = true;        }        //nickname valid        var value = $("#nickname").val().trim();        $("#nickname").val(value);        if(value == ""){            $("#nickname").next().next().html("<i class='fa fa-exclamation-circle'></i><span> Nickname can't be empty</span>");            $("#nickname").next().next().show();            $("#nickname").val("Nickname");        }        else{            rnickname = true;        }        //email valid        var value = $("#email").val().trim();        $("#email").val(value);        if(value == ""){            $("#email").next().next().html("<i class='fa fa-exclamation-circle'></i><span> E-mail can't be empty</span>");            $("#email").next().next().show();            $("#email").val("E-mail");        }        else{            var reg = /^([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/;            if(reg.test(value) == false){                $("#email").next().next().html("<i class='fa fa-exclamation-circle'></i><span> E-mail format invalid</span>");                $("#email").next().next().show();            }            else{                remail = true;            }        }        //register        if(rusername && rpassword && rconpass && rnickname && remail){            $("#RegisterButton").disabled = true;            var paramData = $("#registerform").serialize();            $.post("http://localhost:8080/FSS/rest/userinfo/register", paramData, function(data){                if(data == "success"){                    window.location = "register_success.html";                }                else{                    $("#registererror").show();                    $("#RegisterButton").disabled = false;                }            });        }    });    /**     * 注册信息验证     */    var rusername = false;    var rpassword = false;    var rconpass = false;    var rnickname = false;    var remail = false;    $("#rusername").focus(function(){        if($(this).val() == "Username"){            $(this).val("");        }        $(this).next().next().hide();    }).blur(function(){        rusername = false;        var value = $(this).val().trim();        $(this).val(value);        if(value == ""){            $(this).next().next().html("<i class='fa fa-exclamation-circle'></i><span> Username can't be empty</span>");            $(this).next().next().show();            $(this).val("Username");        }        else if(value.length < 6 || value.length > 20){            $(this).next().next().html("<i class='fa fa-exclamation-circle'></i><span> Invalid, 6-20 characters</span>");            $(this).next().next().show();        }        else{            var paramData = "username=" + value;            //验证用户名是否存在            $.post("http://localhost:8080/FSS/rest/userinfo/registerValidUsername", paramData, function(data){                switch (data){                    case "success":                        rusername = true;                        break;                    case "invalid":                        $("#rusername").next().next().html("<i class='fa fa-exclamation-circle'></i><span> Invalid, this Username already exists</span>");                        $("#rusername").next().next().show();                        break;                    default :                        $("#rusername").next().next().html("<i class='fa fa-exclamation-circle'></i><span> Error!</span>");                        $("#rusername").next().next().show();                        break;                }            });        }    });    $("#rpassword").focus(function(){        if($(this).val() == "********"){            $(this).val("");        }        $(this).next().next().hide();    }).blur(function(){        rpassword = false;        var value = $(this).val();        if(value == ""){            $(this).next().next().html("<i class='fa fa-exclamation-circle'></i><span> Password can't be empty</span>");            $(this).next().next().show();            $(this).val("********");        }        else if(value.length < 6 || value.length > 20){            $(this).next().next().html("<i class='fa fa-exclamation-circle'></i><span> Invalid, 6-20 characters</span>");            $(this).next().next().show();        }        else{            rpassword = true;        }    });    $("#passwordconfirm").focus(function(){        if($(this).val() == "********"){            $(this).val("");        }        $(this).next().next().hide();    }).blur(function(){        rconpass = false;        var value = $(this).val();        if(value == ""){            $(this).next().next().html("<i class='fa fa-exclamation-circle'></i><span> Password Confirm can't be empty</span>");            $(this).next().next().show();            $(this).val("********");        }        else if($(this).val() != $("#rpassword").val()){            $(this).next().next().html("<i class='fa fa-exclamation-circle'></i><span> Invalid, must be the same as Password</span>");            $(this).next().next().show();        }        else{            rconpass = true;        }    });    $("#nickname").focus(function(){        if($(this).val() == "Nickname"){            $(this).val("");        }        $(this).next().next().hide();    }).blur(function(){        rnickname = false;        var value = $(this).val().trim();        $(this).val(value);        if(value == ""){            $(this).next().next().html("<i class='fa fa-exclamation-circle'></i><span> Nickname can't be empty</span>");            $(this).next().next().show();            $(this).val("Nickname");        }        else{            rnickname = true;        }    });    $("#email").focus(function(){        if($(this).val() == "E-mail"){            $(this).val("");        }        $(this).next().next().hide();    }).blur(function(){        remail = false;        var value = $(this).val().trim();        $(this).val(value);        if(value == ""){            $(this).next().next().html("<i class='fa fa-exclamation-circle'></i><span> E-mail can't be empty</span>");            $(this).next().next().show();            $(this).val("E-mail");        }        else{            var reg = /^([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/;            if(reg.test(value) == false){                $(this).next().next().html("<i class='fa fa-exclamation-circle'></i><span> E-mail format invalid</span>");                $(this).next().next().show();            }            else{                remail = true;            }        }    });    /**     * 显示登录页     */    $("#showRegister").click(function(){        $("#login_panel").hide();        $("#register_panel").show();    });    /**     * 回到登录     */    $("#returnLogin").click(function(){        $("#login_panel").show();        $("#register_panel").hide();    });});